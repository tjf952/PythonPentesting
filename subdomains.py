#!/usr/bin/env python3

"""Subdomains

Discovering subdomains by using a list of possible entries

Usage: $ python3 subdomains.py <url>
"""

import sys

import requests


def find_subdomains(target: str) -> list:
    """Gets a list of information from a url

    Args:
        target (str): Starting url for target site

    Returns:
        list: All valid subdomains
    """
    sublist = open("resources/subdomains.txt").read().splitlines()
    for sub in sublist:
        attempt = f"https://{sub}.{target}"
        try:
            requests.get(attempt)
        except requests.ConnectionError:
            pass
        else:
            print(f"Valid domain: {attempt}")


if __name__ == "__main__":
    if len(sys.argv) < 2:
        print(f"[!] Usage: python3 {sys.argv[0]} <target>")
        sys.exit(1)
    find_subdomains(sys.argv[1])
